{"ast":null,"code":"import React,{createContext,useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export const AppContext=/*#__PURE__*/createContext({});export function AppProvider(_ref){let{children}=_ref;const[product,setProduct]=useState(null);const[cart,serCart]=useState([]);function getData(currentItems){const url=\"https://661b930865444945d04fca10.mockapi.io/ps\";axios.get(url).then(function(res){setProduct(res.data);}).catch(function(error){console.log(error);});}useEffect(()=>{getData();},[]);const addCart=id=>{const pro=product.find(item=>item.id==id);const index=cart.findIndex(item=>item.id==id);if(index>=0){const newCart=cart;newCart[index]['Sl']++;}else{serCart([...cart,{...pro,Sl:1}]);}console.log(cart);};const removeByid=id=>{serCart(cart.filter(item=>item.id!=id));};const updateSl=(id,num)=>{serCart(cart.map(item=>item.id==id&&!(item.Sl==1&&num==-1)?{...item,Sl:item.Sl+num}:item));};return/*#__PURE__*/_jsx(AppContext.Provider,{value:{product,addCart,cart,removeByid,updateSl},children:children});}","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","jsx","_jsx","AppContext","AppProvider","_ref","children","product","setProduct","cart","serCart","getData","currentItems","url","get","then","res","data","catch","error","console","log","addCart","id","pro","find","item","index","findIndex","newCart","Sl","removeByid","filter","updateSl","num","map","Provider","value"],"sources":["E:/nguyen cong dai/Do_an/frontend/src/AppContext.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport axios from 'axios'\r\nexport const AppContext = createContext({})\r\nexport function AppProvider({ children }) {\r\n    const [product, setProduct] = useState(null)\r\n    const [cart, serCart] = useState([])\r\n    function getData(currentItems) {\r\n        const url = `https://661b930865444945d04fca10.mockapi.io/ps`\r\n        axios.get(url)\r\n            .then(function (res) {\r\n                setProduct(res.data)\r\n\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        getData()\r\n    }, [])\r\n\r\n    const addCart = (id) => {\r\n        const pro = product.find(item => item.id == id)\r\n        const index = cart.findIndex(item => item.id == id)\r\n        if (index >= 0) {\r\n            const newCart = cart\r\n            newCart[index]['Sl']++\r\n        }\r\n        else {\r\n            serCart([...cart, { ...pro, Sl: 1 }])\r\n        }\r\n\r\n        console.log(cart)\r\n    }\r\n    \r\n    const removeByid = (id) => {\r\n        serCart(cart.filter(item => item.id != id))\r\n    }\r\n    const updateSl=(id,num)=>{\r\n        serCart(cart.map(item=>((item.id==id)&&!(item.Sl==1 && num ==-1))?{...item,Sl:item.Sl+num}:item))\r\n\r\n    }\r\n    return (\r\n        <AppContext.Provider value={{ product, addCart, cart, removeByid,updateSl }} >\r\n            {children}\r\n        </AppContext.Provider>\r\n    )\r\n}\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACjE,MAAO,CAAAC,KAAK,KAAM,OAAO,QAAAC,GAAA,IAAAC,IAAA,yBACzB,MAAO,MAAM,CAAAC,UAAU,cAAGN,aAAa,CAAC,CAAC,CAAC,CAAC,CAC3C,MAAO,SAAS,CAAAO,WAAWA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACpC,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACU,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpC,QAAS,CAAAY,OAAOA,CAACC,YAAY,CAAE,CAC3B,KAAM,CAAAC,GAAG,iDAAmD,CAC5Db,KAAK,CAACc,GAAG,CAACD,GAAG,CAAC,CACTE,IAAI,CAAC,SAAUC,GAAG,CAAE,CACjBR,UAAU,CAACQ,GAAG,CAACC,IAAI,CAAC,CAExB,CAAC,CAAC,CACDC,KAAK,CAAC,SAAUC,KAAK,CAAE,CACpBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CACtB,CAAC,CAAC,CACV,CAEArB,SAAS,CAAC,IAAM,CACZa,OAAO,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAW,OAAO,CAAIC,EAAE,EAAK,CACpB,KAAM,CAAAC,GAAG,CAAGjB,OAAO,CAACkB,IAAI,CAACC,IAAI,EAAIA,IAAI,CAACH,EAAE,EAAIA,EAAE,CAAC,CAC/C,KAAM,CAAAI,KAAK,CAAGlB,IAAI,CAACmB,SAAS,CAACF,IAAI,EAAIA,IAAI,CAACH,EAAE,EAAIA,EAAE,CAAC,CACnD,GAAII,KAAK,EAAI,CAAC,CAAE,CACZ,KAAM,CAAAE,OAAO,CAAGpB,IAAI,CACpBoB,OAAO,CAACF,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,CAC1B,CAAC,IACI,CACDjB,OAAO,CAAC,CAAC,GAAGD,IAAI,CAAE,CAAE,GAAGe,GAAG,CAAEM,EAAE,CAAE,CAAE,CAAC,CAAC,CAAC,CACzC,CAEAV,OAAO,CAACC,GAAG,CAACZ,IAAI,CAAC,CACrB,CAAC,CAED,KAAM,CAAAsB,UAAU,CAAIR,EAAE,EAAK,CACvBb,OAAO,CAACD,IAAI,CAACuB,MAAM,CAACN,IAAI,EAAIA,IAAI,CAACH,EAAE,EAAIA,EAAE,CAAC,CAAC,CAC/C,CAAC,CACD,KAAM,CAAAU,QAAQ,CAACA,CAACV,EAAE,CAACW,GAAG,GAAG,CACrBxB,OAAO,CAACD,IAAI,CAAC0B,GAAG,CAACT,IAAI,EAAIA,IAAI,CAACH,EAAE,EAAEA,EAAE,EAAG,EAAEG,IAAI,CAACI,EAAE,EAAE,CAAC,EAAII,GAAG,EAAG,CAAC,CAAC,CAAC,CAAE,CAAC,GAAGR,IAAI,CAACI,EAAE,CAACJ,IAAI,CAACI,EAAE,CAACI,GAAG,CAAC,CAACR,IAAI,CAAC,CAAC,CAErG,CAAC,CACD,mBACIxB,IAAA,CAACC,UAAU,CAACiC,QAAQ,EAACC,KAAK,CAAE,CAAE9B,OAAO,CAAEe,OAAO,CAAEb,IAAI,CAAEsB,UAAU,CAACE,QAAS,CAAE,CAAA3B,QAAA,CACvEA,QAAQ,CACQ,CAAC,CAE9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}